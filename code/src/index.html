<!DOCTYPE html>
<html>
<head>
  <title>MultiCloud Platform</title>
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="../css/modal_asociarcuenta.css">
  <link rel="stylesheet" href="../css/modal_crearmaquina.css">
</head>
<body>
  <div id="index_listado_mv"></div>
  <div id="index_sin_conexion">
    <h1 id="index_sin_conexion_texto"> Por favor, asocie alguna cuenta de AWS o Azure a la aplicación.</h1>
  </div>
  <footer>
    <div><button id="index_crear_maquina">Crear Maquina</button></div>
    <button id="asociar_cuentas">Asociar Cuentas</button>
    <span style="display:flex">
      <h4 id="index_cuentaAWS"></h4>
      <h4 id="index_cuentaazure"></h4>
    </span>
  </footer>

  <!-- Modal ASOCIAR CUENTAS -->
  <div id="asociar_cuentas_modal" class="modal">
    <div class="modal-content">
      <span id="asociar_cuentas_span" class="close">&times;</span>
      <h1>ASOCIAR CUENTAS</h1>

      <div class="asociar_cuentas_tabs">
        <button class="asociar_cuentas_tab_btn active" data-tab="asociar_cuentas_awstab">AWS</button>
        <button class="asociar_cuentas_tab_btn" data-tab="asociar_cuentas_azuretab">Azure</button>
        <button class="asociar_cuentas_tab_btn" data-tab="asociar_cuentas_resumentab">Información Resumen</button>
      </div>
    
      <div class="asociar_cuentas_tab_content active" id="asociar_cuentas_awstab">
        <div id="asociar_cuentasAWS_form">
          <label for="asociar_cuentasAWS_publickey_input" class="asociar_cuentas_label">Clave de acceso:</label>
          <input type="text" id="asociar_cuentasAWS_publickey_input" class="asociar_cuentas_input" value="">
      
          <label for="asociar_cuentasAWS_secretkey_input" class="asociar_cuentas_label">Clave de acceso secreta:</label>
          <input type="password" id="asociar_cuentasAWS_secretkey_input" class="asociar_cuentas_input" value="">
        
          <button id="asociar_cuentasAWS_confirmar">Asociar Cuentas</button>
          <button id="asociar_cuentasAWS_tutorial">Mostrar/Ocultar Ayuda</button>
          <div id="asociar_cuentasAWS_tutorial_text">
            <h3>Pasos para conectar cuenta de AWS:</h3>
            <p>1. Crear una cuenta de Amazon Web Service. Seguir los pasos que indica la página web.</p>
            <p>2. En el portal de AWS, insertar en el buscador (parte superior izquierda) el termino "IAM".</p>
            <p>3. En el listado situado a la izquierda, pulsar sobre la sección "Usuarios"</p>
            <p>4. En la sección "Usuarios", buscar el botón de "Agregar usuarios", situado en la parte superior derecha.</p>
            <p>5. Introducir el nombre que desee y pulsar en "Siguiente".</p>
            <p>6. En el paso "Establecer permisos", avanza sin modificar nada pulsando en el boton "Siguiente".</p>
            <p>7. En el paso "Revisar y crear", avanza sin modificar nada pulsando en el boton "Crear usuario".</p>
            <p>8. Pulsar encima del nombre que le hemos otorgado al usuario para abrir los detalles avanzados del usuario.</p>
            <p>9. En la sección de "Permisos", en el modulo "Políticas de permisos", buscar en la parte derecha el boton "Agregar permisos", pulsarlo y elegir "Crear politica insertada".</p>
            <p>10. En la parte superior derecha, buscar el boton "JSON" y pulsarlo.</p>
            <p>11. Sustituir el contenido por el siguiente texto:
              {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Sid": "VisualEditor0",
                  "Effect": "Allow",
                  "Action": [
                    "ec2:DescribeImages",
                    "ec2:DescribeInstances",
                    "ec2:TerminateInstances",
                    "ec2:StartInstances",
                    "ec2:CreateTags",
                    "ec2:DescribeRegions",
                    "ec2:RunInstances",
                    "ec2:StopInstances"
                  ],
                  "Resource": "*"
                }
              ]
            }</p>
            <p>12. Pulsar en el botón "Siguiente". </p>
            <p>13. En el siguiente paso, introducir un nombre que se desee y pulsar en "Crear política".</p>
            <p>14. En la ventana detallada del usuario, ir a la sección "Credenciales de seguridad". </p>
            <p>15. En el modulo "Claves de acceso", pulsar en "Crear clave de acceso".</p>
            <p>16. Elegir "Código local", marcar la casilla de Confirmación y pulsar en "Siguiente". </p>
            <p>17. Introduzca la descripción que desee y pulse en "Crear clave de acceso". </p>
            <p>18. Copiar y guardar de manera segura las claves de acceso. (Manual o CSV)</p>
            <p>19. Pulsar en "Listo" </p>
            <p>20. Rellene las claves de acceso en los espacios indicados en esta aplicación. </p>

          </div>
        </div>
        <div id="asociar_cuentasAWS_conectada">
          <h1>Cuenta de AWS: Conectada Correctamente</h1><br>
          <label for="asociar_cuentasAWS_region">Seleccione la region:</label><br>
          <select id="asociar_cuentasAWS_region" class="index_select">
          </select><br>
          <button id="asociar_cuentasAWS_cambiarregion">Cambiar</button>
        </div>
      </div>
    
      <div class="asociar_cuentas_tab_content" id="asociar_cuentas_azuretab">
        <div id="asociar_cuentasazure_form">
          
          <label for="asociar_cuentasazure_subid_input" class="asociar_cuentas_label">Subscription ID:</label>
          <input type="text" id="asociar_cuentasazure_subid_input" class="asociar_cuentas_input" value="">

          <label for="asociar_cuentasazure_tenantid_input" class="asociar_cuentas_label">Tenant ID:</label>
          <input type="text" id="asociar_cuentasazure_tenantid_input" class="asociar_cuentas_input" value="">

          <label for="asociar_cuentasazure_clientid_input" class="asociar_cuentas_label">Client ID:</label>
          <input type="text" id="asociar_cuentasazure_clientid_input" class="asociar_cuentas_input" value="">

          <label for="asociar_cuentasazure_clientsecret_input" class="asociar_cuentas_label">Client Secret:</label>
          <input type="password" id="asociar_cuentasazure_clientsecret_input" class="asociar_cuentas_input" value="">
        
          <button id="asociar_cuentasazure_confirmar">Asociar Cuentas</button>
          <button id="asociar_cuentasazure_tutorial">Mostrar/Ocultar Ayuda</button>
          <div id="asociar_cuentasazure_tutorial_text">
            <h3>Pasos para conectar cuenta de Azure (los términos pueden variar según el idioma en el que se encuentre el portal de Azure):</h3>
            <p>1. Crear una cuenta de Azure. Seguir los pasos que indica la página web.</p>
            <p>2. En la barra superior de busqueda, insertar "Suscripciones", buscarlo en el apartado de "Servicios" y cliquear encima.</p>
            <p>3. Buscar la suscripcion que se desee utilizar y copiar el ID de la suscripcion (uno de los parametros necesarios para vincular la cuenta a la aplicación - Subscription ID).</p>
            <p>4. En la barra superior de busqueda, insertar "Azure Active Directory", buscarlo en el apartado de "Servicios" y cliquear encima.</p>
            <p>5. En el panel de información basica que aparece nada mas pulsar, localiza "Id. del inquilino" (uno de los parametros necesarios para vincular la cuenta a la aplicación - Tenant ID).</p>
            <p>6. En el panel lateral izquierdo, buscar la sección de "Registros de aplicaciones".</p>
            <p>7. Pulsar sobre "Nuevo registro".</p>
            <p>8. Indicar el nombre que se desee y pulsar en "Registrar" en la parte inferior.</p>
            <p>9. En el panel de "Información esencial", localizzar "Id. de aplciación (cliente)" (uno de los parametros necesarios para vincular la cuenta a la aplicación - Client ID)</p>
            <p>10. En el mismo panel, localizar "Credenciales de cliente" y pulsar sobre "Agregar un certificado o secreto".</p>
            <p>11. Pulsar sobre "Nuevo secreto de cliente" y rellenar los datos a gusto. Pulsar "Agregar" para terminar.</p>
            <p>12. Copiar el valor de la clave secreta (uno de los parametros necesarios para vincular la cuenta a la aplicación - Client Secret), no confundir con el ID.IMPORTANTE NO PERDERLA, solo se podrá consultar en este momento. </p>
            <p>13. En la barra superior de busqueda, insertar "Suscripciones", buscarlo en el apartado de "Servicios" y pulsar encima.</p>
            <p>14. Pulsar sobre el nombre de la suscripcion. </p>
            <p>15. Entrar en la sección de "Control de acceso (IAM)", situado en el panel lateral izquierdo.</p>
            <p>16. Pulsar en "Agregar" y en "Agregar asignación de roles".</p>
            <p>17. En la pestaña de "Rol", cambiar a la subpestaña "Roles de administrador con privilegios" y elegir "Colaborador". </p>
            <p>18. En la pestaña de "Miembros", pulsar en "Seleccionar miembros" y en la parte derecha, buscar el nombre de la aplicación seleccionado en el paso 8. Pulsar encima del nombre y terminar pulsando "Seleccionar".</p>
            <p>19. En la pestaña de "Revisión y asignación", terminar pulsando "Revisar y asignar" en la parte inferior.</p>
            <p>20. Rellene las claves de acceso en los espacios indicados en esta aplicación. </p>

          </div>
        </div>
        <div id="asociar_cuentasazure_conectada">
          <h1>Cuenta de Azure: Conectada Correctamente</h1><br>
          <label for="asociar_cuentasazure_region">Seleccione la region:</label><br>
          <select id="asociar_cuentasazure_region" class="index_select">
          </select><br>
          <button id="asociar_cuentasazure_cambiarregion">Cambiar</button>
        </div>
      </div>  
      
      <div class="asociar_cuentas_tab_content" id="asociar_cuentas_resumentab">
        <h1> Información Resumen </h1>
        <label for="asociar_cuentasResumen_primero">Primer parámetro:</label>
        <br>
        <select id="asociar_cuentasResumen_primero" class="index_select">
        </select>
        <br>
        <label for="asociar_cuentasResumen_segundo">Segundo parámetro:</label>
        <br>
        <select id="asociar_cuentasResumen_segundo" class="index_select">
        </select>
        <br>
        <label for="asociar_cuentasResumen_tercero">Tercer parámetro:</label>
        <br>
        <select id="asociar_cuentasResumen_tercero" class="index_select">
        </select>
        <br>
        <button id="asociar_cuentasResumen_cambiarResumen">Cambiar</button>
      </div>
    </div>
  </div>

  <!-- Modal CONFIRMAR ACCION -->
  <div id="confirmar_accion_modal" class="modal">
    <div class="modal-content">
      <span id="confirmar_accion_span" class="close">&times;</span>
      <h1 id="confirmar_accion_titulo"></h1><br>
      <span id="confirmar_accion_texto"></span><br>
      <button id="confirmar_accion_confirmar">Confirmar</button>   
    </div>
  </div>

  <!-- Modal CREACION MV -->
  <div id="crear_maquina_modal" class="modal">
    <div class="modal-content">
      <span id="crear_maquina_span" class="close">&times;</span>

      <div class="crear_maquina_tabs">
        <button class="crear_maquina_tab_btn active" data-tab="crear_maquina_awstab">AWS</button>
        <button class="crear_maquina_tab_btn" data-tab="crear_maquina_azuretab">Azure</button>
      </div>
      
      <div class="crear_maquina_tab_content active" id="crear_maquina_awstab">
        <div id="crear_maquinaAWS_form">
          <label for="crear_maquinaAWS_name_input" class="crear_maquinaAWS_label">Nombre:</label>
          <input type="text" id="crear_maquinaAWS_name_input" class="crear_maquinaAWS_input" value="">
          <label for="crear_maquinaAWS_ami" class="crear_maquinaAWS_label">Seleccione la imagen:</label>
          <select id="crear_maquinaAWS_ami" class="crear_maquinaAWS_select">
            <option value="ami-0f34c5ae932e6f0e4">AMI de Amazon Linux 2023</option>
            <option value="ami-053b0d53c279acc90">Ubuntu Server 22.04 LTS (HVM), SSD Volume Type</option>
            <option value="ami-0fc682b2a42e57ca2">Microsoft Windows Server 2022 Base</option>
          </select>
          <label for="crear_maquinaAWS_tipo" class="crear_maquinaAWS_label">Seleccione el tipo de máquina virtual:</label>
          <select id="crear_maquinaAWS_tipo" class="crear_maquinaAWS_select">
            <option value="t2.micro">t2.micro</option>
            <option value="t2.nano">t2.nano</option>
            <option value="t2.small">t2.small</option>
          </select>
          <button id="crear_maquinaAWS_confirmar">Crear Maquina</button>
        </div>
        <div id="crear_maquinaAWS_noconectada">
          <h1>Por favor, conecte su cuenta de AWS.</h1>
        </div>
      </div>
    
      <div class="crear_maquina_tab_content" id="crear_maquina_azuretab">
        <div id="crear_maquinaazure_form">
          <label for="crear_maquinaazure_name_input" class="crear_maquinaazure_label">Nombre:</label>
          <input type="text" id="crear_maquinaazure_name_input" class="crear_maquinaazure_input" value="">
          <label for="crear_maquinaazure_ami" class="crear_maquinaazure_label">Seleccione el sistema operativo:</label>
          <select id="crear_maquinaazure_ami" class="crear_maquinaazure_select">
            <option value="Ubuntu Server 20.04 LTS - Gen2">Ubuntu Server 20.04 LTS - Gen2</option>
            <option value="Ubuntu Server 16.04 LTS">Ubuntu Server 16.04 LTS</option>
            <option value="Windows Server 2019 Datacenter - x64 Gen2">Windows Server 2019 Datacenter - x64 Gen2</option>
          </select>
          <label for="crear_maquinaazure_tipo" class="crear_maquinaazure_label">Seleccione el tipo de máquina virtual:</label>
          <select id="crear_maquinaazure_tipo" class="crear_maquinaazure_select">
            <option value="Standard_DS1_v2">Standard_DS1_v2</option>
            <option value="Standard_B1ms">Standard_B1ms</option>
            <option value="Standard_B1s">Standard_B1s</option>
          </select>
          <br><span>Las máquinas de Azure no se crean de forma instánea y se debe esperar un par de minutos hasta que aparezcan. Si es la primera vez que se crea una máquina virtual en esta aplicación, la espera puede llegar a ser de 10 minutos.</span><br>
          <button id="crear_maquinaazure_confirmar">Crear Maquina</button>
        </div>
        <div id="crear_maquinaazure_noconectada">
          <h1>Por favor, conecte su cuenta de Azure.</h1>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal mas INFO -->
  <div id="mas_info_modal" class="modal">
    <div class="modal-content">
      <span id="mas_info_span" class="close">&times;</span>
      <h1 id="mas_info_titulo"></h1>
      <div id="mas_info_contenido">Lorem</div>
    </div>
  </div>

  <script src="../js_scripts/variables.js"></script>
  <script src="../js_scripts/MV_class.js"></script>
  <script src="../js_scripts/python.js"></script>
  <script src="../js_scripts/listado.js"></script>
  <script src="../js_scripts/modal_confirmar_accion.js"></script>
  <script src="../js_scripts/modal_asociarcuenta.js"></script>
  <script src="../js_scripts/modal_asociarcuenta_tabs.js"></script>
  <script src="../js_scripts/modal_crearmaquina.js"></script>
  <script src="../js_scripts/modal_crearmaquina_tabs.js"></script>
  <script src="../js_scripts/modal_masinfo.js"></script>
  <script src="../js_scripts/refrescarInformacion.js"></script>
</body>
</html>
